/**
 * OTB - functions 
 */(function(e){window.OTB=window.OTB||{};var t=$(".header-org,.content-org,.footer-org"),n=$(".header-org"),r=$(".content-org"),i=$(".footer-org"),s=$(".added-row"),o=$(".added-module");$("nav li ul").parent().addClass("sub");$(".sub").append("<span></span>");$(".touch nav .sub > span").on("click",function(e){var t=$(this).parent(),n=$(this);t.hasClass("show")?t.removeClass("show").find("li.sub").removeClass("show"):t.addClass("show");return!1});$(".bth-edit").on("click",function(e){var t=$(this),n=$("body");if(n.hasClass("edit-layout")){n.removeClass("edit-layout");OTB.removeDropAreas()}else{n.addClass("edit-layout");OTB.addDropAreas();OTB.initDnD()}return!1});OTB.addDropAreas=function(){t.addClass("drop-here");t.find(".big").text("Drop area");OTB.initDnD()};OTB.removeDropAreas=function(){t.removeClass("addStuff");t.parent().removeClass("drop-here");n.find(".big").text("Header");r.find(".big").text("Content");i.find(".big").text("Footer");$(".ghost-row").remove();$(".ghost-module").remove()};OTB.initDnD=function(){function r(e){t=this;e.dataTransfer.effectAllowed="copy";e.dataTransfer.setData("text/html",this.innerHTML)}function i(e){[].forEach.call(l,function(e){e.classList.remove("dragOVER");e.classList.remove("dragLEAVE")})}function s(e){e.preventDefault&&e.preventDefault();e.dataTransfer.dropEffect="copy";this.classList.add("dragOVER");this.classList.remove("dragLEAVE");return!1}function o(e){this.classList.add("dragENTER");this.classList.remove("dragLEAVE")}function u(e){this.classList.add("dragLEAVE");this.classList.remove("dragENTER");this.classList.remove("dragOVER")}function a(e){e.stopPropagation&&e.stopPropagation();this.classList.remove("over");this.classList.remove("dragOVER");this.classList.remove("dragENTER");this.classList.remove("dragLEAVE");var t=e.dataTransfer.getData("text/html");$(this).replaceWith(t);OTB.initDnD();return!1}$(".ghost-row").remove();$(".ghost-module").remove();$(".added-row").parent().removeClass("drop-here");$(".added-row").before('<div class="ghost-row drop-here">Drop area</div>');$(".added-module").addClass("drop-here");$(".added-module").before('<div class="ghost-module drop-here">Drop area</div>');var t=null,n=!1,f=e.querySelectorAll(".drag-me");[].forEach.call(f,function(e){e.setAttribute("draggable","true");e.addEventListener("dragstart",r,!1);e.addEventListener("dragend",i,!1)});var l=e.querySelectorAll(".drop-here");[].forEach.call(l,function(e){e.addEventListener("dragenter",o,!1);e.addEventListener("dragover",s,!1);e.addEventListener("drop",a,!1);e.addEventListener("dragleave",u,!1)})}})(document);