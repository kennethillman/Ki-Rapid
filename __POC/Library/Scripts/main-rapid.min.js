////////////////////////////////////
////////////////////////////////////
////////////////////////////////////
// RAPID - functions 
////////////////////////////////////
////////////////////////////////////
////////////////////////////////////
(function(e){window.RAPID=window.RAPID||{};var t=$(".header-org,.content-org,.footer-org"),n=$(".header-org"),r=$(".content-org"),i=$(".footer-org"),s=$(".added-row"),o=$(".added-module"),u=null;RAPID.init=function(){console.log("RAPID.init")};RAPID.bthEdit=function(){console.log("RAPID.bthEdit");$(".bth-edit").on("click",function(e){var t=$(this),n=$("body");if(n.hasClass("edit-layout")){n.removeClass("edit-layout");RAPID.removeDropAreas()}else{n.addClass("edit-layout");RAPID.addDropAreas();RAPID.drop.init()}return!1})};RAPID.addDropAreas=function(){console.log("RAPID.addDropAreas");t.addClass("drop-here");t.find(".big").text("Drop area")};RAPID.removeDropAreas=function(){console.log("RAPID.removeDropAreas");t.parent().removeClass("drop-here");n.find(".big").text("Header");r.find(".big").text("Content");i.find(".big").text("Footer");$(".ghost-row").remove();$(".ghost-module").remove()};RAPID.drag={init:function(){console.log("RAPID.drag.init();");RAPID.drag.addListners()},handleDragStart:function(e){console.log("RAPID.drag.handleDragStart();");u=this;e.dataTransfer.effectAllowed="copy";e.dataTransfer.setData("text/html",this.innerHTML)},handleDragEnd:function(t){console.log("RAPID.drag.handleDragEnd();");var n=e.querySelectorAll(".drop-here");[].forEach.call(n,function(e){e.classList.remove("dragOVER");e.classList.remove("dragLEAVE")})},addListners:function(){console.log("RAPID.drag.addListners();");var t=e.querySelectorAll(".drag-me");[].forEach.call(t,function(e){e.setAttribute("draggable","true");e.addEventListener("dragstart",RAPID.drag.handleDragStart,!1);e.addEventListener("dragend",RAPID.drag.handleDragEnd,!1)})}};RAPID.drop={init:function(){console.log("init -> RAPID.drop.init();");RAPID.drop.dropAreas()},dropAreas:function(e){$(".ghost-row").remove();$(".ghost-module").remove();$(".added-row").parent().removeClass("drop-here");$(".added-row").before('<div class="ghost-row drop-here before">Drop area</div>');$(".added-module").addClass("drop-here");$(".added-module").before('<div class="ghost-module drop-here before">Drop area</div>');RAPID.drop.addListners()},handleDragEnter:function(e){this.classList.add("dragENTER");this.classList.remove("dragLEAVE")},handleDragOver:function(e){e.preventDefault&&e.preventDefault();e.dataTransfer.dropEffect="copy";this.classList.add("dragOVER");this.classList.remove("dragLEAVE");return!1},handleDrop:function(e){e.stopPropagation&&e.stopPropagation();this.classList.remove("over");this.classList.remove("dragOVER");this.classList.remove("dragENTER");this.classList.remove("dragLEAVE");var t=e.dataTransfer.getData("text/html");$(this).replaceWith(t);RAPID.drop.dropAreas();return!1},handleDragLeave:function(e){this.classList.add("dragLEAVE");this.classList.remove("dragENTER");this.classList.remove("dragOVER")},addListners:function(){console.log("RAPID.drop.addListners();");var t=e.querySelectorAll(".drop-here");[].forEach.call(t,function(e){e.addEventListener("dragenter",RAPID.drop.handleDragEnter,!1);e.addEventListener("dragover",RAPID.drop.handleDragOver,!1);e.addEventListener("drop",RAPID.drop.handleDrop,!1);e.addEventListener("dragleave",RAPID.drop.handleDragLeave,!1)})}}})(document);